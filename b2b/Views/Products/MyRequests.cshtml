@model List<b2b.Models.ProductRequestListItem>
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Teklif Taleplerim";
    ViewBag.ActivePage = "Products";
}

<div class="container-fluid flex-grow-1 container-p-y">
    <h4 class="font-weight-bold py-3 mb-0">Teklif Taleplerim</h4>
    <div class="text-muted small mt-0 mb-4 d-block breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/"><i class="feather icon-home"></i></a></li>
            <li class="breadcrumb-item">Ürünler</li>
            <li class="breadcrumb-item active">Teklif Taleplerim</li>
        </ol>
    </div>

    <div class="card mb-3">
        <div class="card-body">
            <form method="get" class="form-inline">
                <label class="mr-2">Durum</label>
                @{ var statusFilter = ViewBag.StatusFilter as string; }
                <select name="status" class="custom-select mr-2">
                    <option value="">Tümü</option>
                    @if (string.Equals(statusFilter, "Beklemede")) {<option value="Beklemede" selected>Beklemede</option>} else {<option value="Beklemede">Beklemede</option>}
                    @if (string.Equals(statusFilter, "Yanıtlandı")) {<option value="Yanıtlandı" selected>Yanıtlandı</option>} else {<option value="Yanıtlandı">Yanıtlandı</option>}
                    @if (string.Equals(statusFilter, "İptal")) {<option value="İptal" selected>İptal</option>} else {<option value="İptal">İptal</option>}
                </select>
                <button type="submit" class="btn btn-primary">Filtrele</button>
            </form>
        </div>
    </div>

    <div class="card">
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-hover align-middle">
                    <thead>
                        <tr>
                            <th>Tarih</th>
                            <th>Ürün</th>
                            <th>Tip</th>
                            <th style="width:45%">Açıklama</th>
                            <th>Durum</th>
                        </tr>
                    </thead>
                    <tbody>
                        @if (Model.Any())
                        {
                            foreach (var item in Model)
                            {
                                <tr>
                                    <td class="text-nowrap">@item.CreatedDate.ToString("dd.MM.yyyy HH:mm")</td>
                                    <td class="font-weight-semibold">@item.ProductName</td>
                                    <td>
                                        <span class="badge badge-light">@item.RequestType</span>
                                    </td>
                                    <td class="text-muted">@item.Description</td>
                                    <td>
                                        <span class="badge @(item.Status=="Beklemede"?"badge-warning": item.Status=="Yanıtlandı"?"badge-success":"badge-secondary")">@item.Status</span>
                                    </td>
                                </tr>
                            }
                        }
                        else
                        {
                            <tr>
                                <td colspan="5" class="text-center text-muted py-4">
                                    Kayıt bulunamadı.
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>


